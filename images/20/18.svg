<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns:xl="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="2034.5 11232.5 701.5 425.63407" width="701.5" height="425.63407">
  <defs>
    <font-face font-family="Helvetica Neue" font-size="16" panose-1="2 0 5 3 0 0 0 2 0 4" units-per-em="1000" underline-position="-100" underline-thickness="50" slope="0" x-height="517" cap-height="714" ascent="951.9958" descent="-212.99744" font-weight="400">
      <font-face-src>
        <font-face-name name="HelveticaNeue"/>
      </font-face-src>
    </font-face>
    <marker orient="auto" overflow="visible" markerUnits="strokeWidth" id="FilledArrow_Marker" stroke-linejoin="miter" stroke-miterlimit="10" viewBox="-1 -4 10 8" markerWidth="10" markerHeight="8" color="black">
      <g>
        <path d="M 8 0 L 0 -3 L 0 3 Z" fill="currentColor" stroke="currentColor" stroke-width="1"/>
      </g>
    </marker>
    <font-face font-family="Helvetica Neue" font-size="12" panose-1="2 0 5 3 0 0 0 2 0 4" units-per-em="1000" underline-position="-100" underline-thickness="50" slope="0" x-height="517" cap-height="714" ascent="951.9958" descent="-212.99744" font-weight="400">
      <font-face-src>
        <font-face-name name="HelveticaNeue"/>
      </font-face-src>
    </font-face>
    <font-face font-family="PingFang SC" font-size="12" panose-1="2 11 4 0 0 0 0 0 0 0" units-per-em="1000" underline-position="-150" underline-thickness="58" slope="0" x-height="600" cap-height="860" ascent="1060.0021" descent="-340.0007" font-weight="400">
      <font-face-src>
        <font-face-name name="PingFangSC-Regular"/>
      </font-face-src>
    </font-face>
  </defs>
  <metadata> Produced by OmniGraffle 7.19.4\n2022-03-03 23:56:31 +0000</metadata>
  <g id="04_message_queue" stroke="none" stroke-dasharray="none" fill="none" fill-opacity="1" stroke-opacity="1">
    <title>04.message queue</title>
    <g id="04_message_queue_Layer_1">
      <title>Layer 1</title>
      <g id="Graphic_865">
        <rect x="2325" y="11233" width="120.5" height="39" fill="white"/>
        <rect x="2325" y="11233" width="120.5" height="39" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(2330 11243.276)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="12.73" y="15">Coordinator</tspan>
        </text>
      </g>
      <g id="Graphic_864">
        <rect x="2035" y="11233" width="120.5" height="39" fill="white"/>
        <rect x="2035" y="11233" width="120.5" height="39" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(2040 11243.276)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="10.794" y="15">Consumer A</tspan>
        </text>
      </g>
      <g id="Graphic_863">
        <rect x="2615" y="11233" width="120.5" height="39" fill="white"/>
        <rect x="2615" y="11233" width="120.5" height="39" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(2620 11243.276)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="10.498" y="15">Consumer B</tspan>
        </text>
      </g>
      <g id="Graphic_862">
        <rect x="2325" y="11618.634" width="120.5" height="39" fill="white"/>
        <rect x="2325" y="11618.634" width="120.5" height="39" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(2330 11628.91)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="12.73" y="15">Coordinator</tspan>
        </text>
      </g>
      <g id="Graphic_861">
        <rect x="2035" y="11618.634" width="120.5" height="39" fill="white"/>
        <rect x="2035" y="11618.634" width="120.5" height="39" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(2040 11628.91)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="10.794" y="15">Consumer A</tspan>
        </text>
      </g>
      <g id="Graphic_860">
        <rect x="2615" y="11618.634" width="120.5" height="39" fill="white"/>
        <rect x="2615" y="11618.634" width="120.5" height="39" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(2620 11628.91)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="10.498" y="15">Consumer B</tspan>
        </text>
      </g>
      <g id="Line_859">
        <line x1="2095.25" y1="11272" x2="2095.25" y2="11618.634" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4.0,4.0" stroke-width="1"/>
      </g>
      <g id="Line_858">
        <line x1="2385.25" y1="11272" x2="2385.25" y2="11618.634" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4.0,4.0" stroke-width="1"/>
      </g>
      <g id="Line_857">
        <line x1="2675.25" y1="11272" x2="2675.25" y2="11618.634" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4.0,4.0" stroke-width="1"/>
      </g>
      <g id="Line_856">
        <line x1="2385.1707" y1="11323.841" x2="2105.0706" y2="11323.158" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_855">
        <line x1="2095.5757" y1="11291.384" x2="2375.6757" y2="11291.599" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_854">
        <rect x="2145.622" y="11279.327" width="187.828" height="24.335999" fill="white"/>
        <text transform="translate(2150.622 11284.327)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="6679102e-19" y="11">1a. Heartbeat (I’m A in the group)</tspan>
        </text>
      </g>
      <g id="Graphic_853">
        <rect x="2180.8312" y="11310.989" width="120" height="25" fill="white"/>
        <text transform="translate(2186.0392 11315.989)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="0" y="11">1b. Heartbeat acked</tspan>
        </text>
      </g>
      <g id="Line_852">
        <line x1="2675" y1="11353.341" x2="2394.9" y2="11352.658" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_851">
        <rect x="2434.5025" y="11339.489" width="192.316" height="27" fill="#ffffc0"/>
        <text transform="translate(2439.5025 11344.489)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="0" y="13">2. JoinGroup (I’m B</tspan>
          <tspan font-family="PingFang SC" font-size="12" font-weight="400" fill="black" y="13">.</tspan>
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" y="13"> I want to join)</tspan>
        </text>
      </g>
      <g id="Line_850">
        <line x1="2095.6922" y1="11376.142" x2="2375.7922" y2="11376.357" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_849">
        <rect x="2145.7385" y="11364.085" width="187.828" height="24.335999" fill="white"/>
        <text transform="translate(2150.7385 11369.085)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="6679102e-19" y="11">3a. Heartbeat (I’m A in the group)</tspan>
        </text>
      </g>
      <g id="Line_848">
        <line x1="2385.288" y1="11408.837" x2="2105.1878" y2="11408.154" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_847">
        <rect x="2137.3744" y="11389.15" width="207.148" height="38.671997" fill="#ffffc0"/>
        <text transform="translate(2142.3744 11394.15)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="1.668" y="11">3b. Heartbeat (Sorry A, group needs </tspan>
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="26.346" y="25.336">to rebalance. Please rejoin)</tspan>
        </text>
      </g>
      <g id="Line_846">
        <line x1="2095.2879" y1="11442.47" x2="2375.388" y2="11442.684" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_845">
        <rect x="2122.6662" y="11430.412" width="233.164" height="24.335999" fill="white"/>
        <text transform="translate(2127.6662 11435.412)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="3410605e-19" y="11">4a. JoinGroup (I’m A. I want to join group)</tspan>
        </text>
      </g>
      <g id="Line_844">
        <line x1="2385.035" y1="11476.755" x2="2104.935" y2="11476.072" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_843">
        <rect x="2123.2256" y="11457.067" width="234.94" height="38.671997" fill="white"/>
        <text transform="translate(2128.2256 11462.067)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="0" y="11">4b. JoinGroup (A joins group successfully.</tspan>
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="63.258" y="25.336">You are a follower)</tspan>
        </text>
      </g>
      <g id="Line_842">
        <line x1="2385.6605" y1="11501.229" x2="2665.7605" y2="11501.444" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_841">
        <rect x="2400.1448" y="11482.004" width="258.952" height="38.671997" fill="white"/>
        <text transform="translate(2405.1448 11487.004)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="1.668" y="11">4b. JoinGroup (B joins the group successfully. </tspan>
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="13.44" y="25.336">You are the leader. Group members: A, B)</tspan>
        </text>
      </g>
      <g id="Line_840">
        <line x1="2675" y1="11550.657" x2="2394.9" y2="11549.974" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_839">
        <rect x="2423.6605" y="11537.805" width="214" height="25" fill="white"/>
        <text transform="translate(2429.0805 11542.805)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="0" y="11">5. SyncGroup (partition dispatch plan)</tspan>
        </text>
      </g>
      <g id="Line_838">
        <line x1="2095.336" y1="11525.387" x2="2375.436" y2="11525.602" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_837">
        <rect x="2156.7318" y="11506.16" width="163.132" height="38.671997" fill="white"/>
        <text transform="translate(2161.7318 11511.16)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="5.664" y="11">5. SyncGroup (Wait for the  </tspan>
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="7105427e-19" y="25.336">leader to dispatch partitions)</tspan>
        </text>
      </g>
      <g id="Line_836">
        <line x1="2385.2264" y1="11575.22" x2="2105.1263" y2="11574.536" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_835">
        <rect x="2111.6708" y="11562.374" width="264" height="25" fill="white"/>
        <text transform="translate(2116.7408 11567.374)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="29842795e-20" y="11">6. SyncGroup (A should consume partition 1, 3)</tspan>
        </text>
      </g>
      <g id="Line_834">
        <line x1="2385.6605" y1="11598.38" x2="2665.7605" y2="11598.595" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_833">
        <rect x="2395.199" y="11585.989" width="265" height="25" fill="white"/>
        <text transform="translate(2400.547 11590.989)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="42632564e-21" y="11">6. SyncGroup (B should consume partition 2, 4)</tspan>
        </text>
      </g>
    </g>
  </g>
</svg>
